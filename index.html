<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ho una domanda...</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600&display=swap">
    </head>
    <body>
        <div class="container">
            <div class="gif-window">
                <img id="main-gif"
                src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDgzcDIycXJ0MDFra2dnNTV1azh4MzNrbjBhbG93cWx0ZGcwYjNjNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/MDJ9IbxxvDUQM/giphy.gif"
                onclick="toggleGif()"
                alt="Cute cat">
            </div>
            <div class="header-container">
                <h1>Mariutsci, vuoi essere il mio Valentino?</h1>
            </div>
            <div class="buttons-box">
                <div class="button-row">
                    <button id="yesBtn" onclick="location.href='success.html'">SÃ¬</button>
                    <button id="noBtn">No</button>
                </div>
                <p id="commentary">Non ti azzardare a cliccare no! ðŸ¦¦</p>
            </div>
        </div>

        <script>
            const gifElement = document.getElementById('main-gif');
            const gif1 = "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDgzcDIycXJ0MDFra2dnNTV1azh4MzNrbjBhbG93cWx0ZGcwYjNjNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/MDJ9IbxxvDUQM/giphy.gif";
            const gif2 = "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdWYxaXljcTVveWYwM3B1ZTdxeHN3NjByZTltaDN5YmR5dG5uaXp6cCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/13ByqbM0hgfN7y/giphy.gif"; 

            function toggleGif() {
                if (gifElement.src === gif1) {
                    gifElement.src = gif2;
                } else {
                    gifElement.src = gif1;
                }
            }

            const commentary = document.getElementById('commentary');
            let missCount = 0;

            const messages = [
                "Ma che fai? ðŸ¤¨",
                "Sicura sicura? Guarda che ti vedo! ðŸ‘€",
                "Mamma mia, che grinta! ðŸƒâ€â™€ï¸",
                "Acqua... fuochino... niente! ðŸ˜‚",
                "Ti stai divertendo, eh? Birbante! ðŸ’…",
                "Ãˆ inutile, rassegnati! âœ¨",
                "Arrenditi, Mariutsci! Ãˆ destino. ðŸ•µï¸â€â™‚ï¸",
                "Il tasto verde Ã¨ molto piÃ¹ simpatico... ðŸ€",
                "Sembri un gatto che insegue un laser! ðŸ±",
                "Ok, ora mi nascondo meglio! ðŸ˜¤"
            ];
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            const buttonsBox = document.querySelector('.buttons-box');

            let yesScale = 1;

            noBtn.addEventListener('mouseover', () => {
                // 1. Get current position BEFORE switching to absolute
                const curX = noBtn.offsetLeft;
                const curY = noBtn.offsetTop;

                // 2. Set the button to absolute so it can jump
                // We do this inside the listener so it stays centered on page load
                if (noBtn.style.position !== 'absolute') {
                    noBtn.style.position = 'absolute';
                    noBtn.style.left = curX + 'px';
                    noBtn.style.top = curY + 'px';
                    noBtn.style.margin = '0'; // Remove any flex margins
                }

                const minJump = 100; 
                const maxJump = 200;

                let moveX = (minJump + Math.random() * (maxJump - minJump)) * (Math.random() > 0.5 ? 1 : -1);
                let moveY = (minJump + Math.random() * (maxJump - minJump)) * (Math.random() > 0.5 ? 1 : -1);

                let newX = curX + moveX;
                let newY = curY + moveY;

                const maxX = buttonsBox.clientWidth - noBtn.offsetWidth;
                const maxY = buttonsBox.clientHeight - noBtn.offsetHeight;

                if (newX < 0 || newX > maxX) newX = Math.random() * maxX;
                if (newY < 0 || newY > maxY) newY = Math.random() * maxY;

                // Apply new position
                noBtn.style.left = newX + 'px';
                noBtn.style.top = newY + 'px';

                if (yesScale < 2.5) { // Change 2.5 to whatever max size you prefer
                    yesScale += 0.15;
                    yesBtn.style.transform = `scale(${yesScale})`;
                } else {
                    // Once it hits the limit, give it a pulsing animation
                    yesBtn.classList.add('max-size-pulse');
                }

                if (missCount < messages.length) {
                    commentary.textContent = messages[missCount];
                } else {
                    commentary.textContent = "Okay, I'm hiding it better now! ðŸ•µï¸â€â™‚ï¸";
                }
                
                missCount++;
            });
        </script>
    </body>
</html>